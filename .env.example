# ==================================
# NEXUS-SECURITY ENVIRONMENT CONFIG
# ==================================

# ============ DATABASE ============
# PostgreSQL - Main relational database
DATABASE_URL=postgresql://postgres:password@localhost:5432/nexus_security
DB_POOL_SIZE=10
DB_MAX_CONNECTIONS=20
DB_CONNECTION_TIMEOUT=30

# MongoDB - Analysis results and unstructured data
MONGODB_URL=mongodb://localhost:27017/nexus_security
MONGODB_DATABASE=nexus_security

# Redis - Caching, sessions, and message queue
REDIS_URL=redis://localhost:6379
REDIS_POOL_SIZE=10
REDIS_TTL=3600

# ============ BLOCKCHAIN ============
# Ethereum/Blockchain Configuration
ETHEREUM_NETWORK=sepolia
ETHEREUM_RPC_URL=https://sepolia.infura.io/v3/YOUR_INFURA_PROJECT_ID
ETHEREUM_WS_URL=wss://sepolia.infura.io/ws/v3/YOUR_INFURA_PROJECT_ID
ETHEREUM_CHAIN_ID=11155111

# Smart Contract Addresses (update after deployment)
BOUNTY_MANAGER_CONTRACT=0x0000000000000000000000000000000000000000
REPUTATION_TOKEN_CONTRACT=0x0000000000000000000000000000000000000000
STAKE_ESCROW_CONTRACT=0x0000000000000000000000000000000000000000
PAYMENT_DISTRIBUTOR_CONTRACT=0x0000000000000000000000000000000000000000

# Wallet Configuration
PLATFORM_PRIVATE_KEY=your_private_key_here_DO_NOT_COMMIT
PLATFORM_ADDRESS=0x0000000000000000000000000000000000000000
GAS_PRICE_MULTIPLIER=1.2
GAS_LIMIT=500000

# ============ STORAGE ============
# Object Storage (S3/MinIO)
STORAGE_PROVIDER=minio
S3_ENDPOINT=http://localhost:9000
S3_BUCKET=nexus-security-files
S3_REGION=us-east-1
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin
S3_USE_SSL=false

# File Upload Limits
MAX_FILE_SIZE_MB=100
ALLOWED_FILE_TYPES=exe,dll,pdf,doc,docx,zip,rar,apk,elf,so

# ============ MICROSERVICES ============
# Service Ports
API_GATEWAY_PORT=8080
USER_SERVICE_PORT=8081
ANALYSIS_ENGINE_PORT=8082
BOUNTY_MANAGER_PORT=8083
NOTIFICATION_SERVICE_PORT=8084
SUBMISSION_SERVICE_PORT=8085
REPUTATION_SERVICE_PORT=8086
CONSENSUS_SERVICE_PORT=8087
PAYMENT_SERVICE_PORT=8088

# Service URLs (for inter-service communication)
API_GATEWAY_URL=http://localhost:8080
USER_SERVICE_URL=http://localhost:8081
ANALYSIS_ENGINE_URL=http://localhost:8082
BOUNTY_MANAGER_URL=http://localhost:8083
NOTIFICATION_SERVICE_URL=http://localhost:8084
SUBMISSION_SERVICE_URL=http://localhost:8085
REPUTATION_SERVICE_URL=http://localhost:8086
CONSENSUS_SERVICE_URL=http://localhost:8087
PAYMENT_SERVICE_URL=http://localhost:8088

# ============ AUTHENTICATION ============
# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_ACCESS_TOKEN_EXPIRATION=3600
JWT_REFRESH_TOKEN_EXPIRATION=604800
JWT_ALGORITHM=HS256

# Session Configuration
SESSION_SECRET=your-session-secret-key-change-this
SESSION_TIMEOUT=3600

# ============ SECURITY ============
# Rate Limiting
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST=100

# CORS Configuration
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization

# API Keys for External Services
API_KEY_SALT=random-salt-for-api-key-hashing

# ============ EXTERNAL APIS ============
# Threat Intelligence APIs
VIRUSTOTAL_API_KEY=your_virustotal_api_key_here
MALWAREBAZAAR_API_KEY=your_malwarebazaar_api_key_here
ALIENVAULT_API_KEY=your_alienvault_api_key_here
URLHAUS_API_KEY=your_urlhaus_api_key_here
HYBRID_ANALYSIS_API_KEY=your_hybrid_analysis_api_key_here

# ============ ANALYSIS ENGINE ============
# ML Models Configuration
ML_MODELS_PATH=./ml_models
ONNX_RUNTIME_THREADS=4
ANALYSIS_TIMEOUT_SECONDS=300

# Sandbox Configuration
SANDBOX_ENABLED=true
SANDBOX_TIMEOUT_SECONDS=120
SANDBOX_VM_PROVIDER=docker
SANDBOX_MAX_CONCURRENT=5

# Static Analysis
YARA_RULES_PATH=./rules/yara
YARA_SCAN_TIMEOUT=60

# ============ CONSENSUS ============
# Consensus Algorithm Configuration
CONSENSUS_ALGORITHM=weighted_voting
MIN_ENGINES_REQUIRED=3
CONSENSUS_THRESHOLD=0.7
REPUTATION_WEIGHT_FACTOR=1.5

# ============ REPUTATION ============
# Reputation System
INITIAL_REPUTATION_SCORE=50
MIN_STAKE_AMOUNT=0.01
REWARD_MULTIPLIER=1.5
PENALTY_MULTIPLIER=0.5
REPUTATION_DECAY_RATE=0.01

# ============ NOTIFICATIONS ============
# Email Configuration (SMTP)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM_ADDRESS=noreply@nexus-security.com
SMTP_FROM_NAME=Nexus Security

# Push Notifications
PUSH_NOTIFICATION_ENABLED=true
FIREBASE_CREDENTIALS_PATH=./config/firebase-credentials.json

# Webhook Notifications
WEBHOOK_ENABLED=true
WEBHOOK_RETRY_ATTEMPTS=3
WEBHOOK_TIMEOUT=10

# ============ MONITORING ============
# Logging
LOG_LEVEL=info
LOG_FORMAT=json
LOG_OUTPUT=stdout

# Metrics
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# Tracing
JAEGER_ENABLED=false
JAEGER_ENDPOINT=http://localhost:14268/api/traces

# ============ MESSAGE QUEUE ============
# RabbitMQ Configuration
RABBITMQ_URL=amqp://guest:guest@localhost:5672
RABBITMQ_EXCHANGE=nexus_security
RABBITMQ_QUEUE_PREFIX=nexus
RABBITMQ_PREFETCH_COUNT=10

# Queue Names
ANALYSIS_QUEUE=analysis_tasks
NOTIFICATION_QUEUE=notifications
PAYMENT_QUEUE=payments
CONSENSUS_QUEUE=consensus_tasks

# ============ FRONTEND ============
VITE_API_BASE_URL=http://localhost:8080
VITE_WS_BASE_URL=ws://localhost:8080
VITE_BLOCKCHAIN_EXPLORER=https://sepolia.etherscan.io
VITE_IPFS_GATEWAY=https://ipfs.io/ipfs

# ============ DEVELOPMENT ============
# Development Mode
NODE_ENV=development
RUST_ENV=development
RUST_LOG=info
RUST_BACKTRACE=1

# Debug Options
DEBUG_MODE=false
SQL_LOGGING=false
PRETTY_PRINT_JSON=true

# ============ PRODUCTION ============
# Production overrides (set these in production environment)
# RUST_ENV=production
# LOG_LEVEL=warn
# DEBUG_MODE=false
# SQL_LOGGING=false
# RUST_BACKTRACE=0
